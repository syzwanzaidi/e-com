<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Catalog.</title>

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
            integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />

        <link rel="stylesheet" href="style.css">

        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

        <style>
            .product img{
                width: 100%;
                height: auto;
                box-sizing: border-box;
                object-fit: cover;
            }

            #featured > div.row.mx-auto.container > nav > ul > li.page-item.active > a{
                background-color: black;
            }

            #featured > div.row.mx-auto.container > nav > ul > li:nth-child(n):hover>a{
                background-color: #5CB338;
                color: white;
            }

            .pagination a{
                color: black;
            }
        </style>

    </head>

    <body>
          <!-- NAVIGATION -->
          <nav class="navbar navbar-expand-lg navbar-light py-3 fixed-top" style="background-color: #424242;">
            <div class="container">
              <img src="img/high.jpg" alt="">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span ><i id="bar" class="fas fa-bars"></i></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                  <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="shop1.html">Shop</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="blog.html">Blog</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="about.html">About</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact Us</a>
                  </li>

                  <li class="nav-item">
                    <!-- Search Bar with Toggle -->
                    <div x-data="{
                        open: false,
                        searchQuery: '',
                        toggleSearch() {
                            this.open = !this.open;
                            if (!this.open) this.searchQuery = ''; // Reset search query when closed
                        },
                        updateSearch() {
                            filterAndRenderProducts('allProductsContainer', this.searchQuery);
                        }
                    }" class="d-flex ml-auto align-items-center search-container">
                        <i @click="toggleSearch" class="fal fa-search" style="cursor: pointer;"></i>
                        <div x-show="open" class="search-popup ml-2" x-transition.duration.500ms>
                            <input 
                                x-model="searchQuery" 
                                @input="updateSearch" 
                                type="text" 
                                class="form-control mt-2" 
                                placeholder="Search..."
                                style="width: 300px;">
                        </div>
                    </div>
                  </li>

                  <li class="nav-item ml-2">
                    <a class="fal fa-shopping-bag" href="cart.html"></a>
                  </li>

              </div>
            </div>
          </nav>


            <section id="featured" class="my-5 py-5" x-data="productSearch()">
              <div class="container mt-5 py-5">
                <h2 class="font-weight-bold">Our Featured</h2>
                <hr>
                <p>Here you can check out our new products with fair price on High.</p>
              </div>
  
              <section id="featured" class="my-5 pb-5">
                <div class="row mx-auto container" id="allProductsContainer">
                  <!-- Products will be dynamically generated here -->
              </div>
              </section>

              <div class="row mx-auto container">
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <!-- Previous Page Button -->
                  <li class="page-item" id="prevPage">
                      <a class="page-link" href="#" tabindex="-1">Previous</a>
                  </li>
              
                  <!-- Page 1 -->
                  <li class="page-item active" id="page1">
                      <a class="page-link" href="shop1.html">1</a>
                  </li>
              
                  <!-- Page 2 -->
                  <li class="page-item" id="page2">
                      <a class="page-link" href="shop2.html">2</a>
                  </li>
              
                  <!-- Page 3 -->
                  <li class="page-item" id="page3">
                      <a class="page-link" href="shop3.html">3</a>
                  </li>
              
                  <!-- Next Page Button -->
                  <li class="page-item" id="nextPage">
                      <a class="page-link" href="#">Next</a>
                  </li>
                </ul>
              </nav>

              </div>
            </div>
          </section>

          <footer class="mt-5 py-5">
            <div class="row container mx-auto pt-5">
              <div class="footer-one col-lg-3 col-md-6 col-12">
                <img src="img/high.jpg" alt="">
                <p class="pt-3">High. is the best website</p>
              </div>
              <div class="footer-one col-lg-3 col-md-6 col-12 mb-3">
                <h5 class="pb-2">Featured</h5>
                <ul class="text-uppercase list-unstyled">
                  <li><a href="#">men</a></li>
                  <li><a href="#">women</a></li>
                  <li><a href="#">boys</a></li>
                  <li><a href="#">girls</a></li>
                  <li><a href="#">new arrivals</a></li>
                  <li><a href="#">shoes</a></li>
                  <li><a href="#">clothes</a></li>
                </ul>
              </div>
  
              <div class="footer-one col-lg-3 col-md-6 col-12 mb-3">
                <h5 class="pb-2">Contact Us</h5>
                  <div>
                    <h6 class="text-uppercase">Address</h6>
                    <p>123 STREET NAME, CITY, US</p>
                  </div>
                  <div>
                    <h6 class="text-uppercase">Phone</h6>
                    <p>01111010214</p>
                  </div>
                  <div>
                    <h6 class="text-uppercase">Email</h6>
                    <p>high@gmail.com</p>
                  </div>
              </div>
  
              <div class="footer-one col-lg-3 col-md-6 col-12">
                <h5 class="pb-2">Instagram</h5>
                <div class="row">
                  <img class="img-fluid w-25 h-100 m-2" src="img/insta/1.jpg" alt="">
                  <img class="img-fluid w-25 h-100 m-2" src="img/insta/2.jpg" alt="">
                  <img class="img-fluid w-25 h-100 m-2" src="img/insta/3.jpg" alt="">
                  <img class="img-fluid w-25 h-100 m-2" src="img/insta/4.jpg" alt="">
                  <img class="img-fluid w-25 h-100 m-2" src="img/insta/5.jpg" alt="">
                </div>
              </div>
            </div>
  
            <div class="copyright mt-5">
              <div class="row container mx-auto">
  
                <div class="col-lg-3 col-md-6 col-12 mb-4">
                  <img src="img/payment.png" alt="">
                </div>
  
                <div class="col-lg-4 col-md-6 col-12 text-nowrap mb-2">
                  <p>High eCommerce 2024. All Right Reserved</p>
                </div>
  
                <div class="col-lg-4 col-md-6 col-12">
                  <a href="#"><i class="fab fa-facebook"></i></a>
                  <a href="#"><i class="fab fa-twitter"></i></a>
                  <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
  
              </div>
            </div>
  
          </footer>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
            integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
            integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
            crossorigin="anonymous"></script>
        <script src="./product.js" defer></script>
    </body>

    <!--Page navigation logic-->
    <script>
        // Set the current page number in localStorage
        localStorage.setItem('currentPage', 1);

        // Get the current page number from localStorage
        const currentPage = parseInt(localStorage.getItem('currentPage')) || 1;

        console.log(`Current Page: ${currentPage}`);

        // Remove the active class from all pagination items
        document.querySelectorAll('.pagination .page-item').forEach(item => {
            item.classList.remove('active');
        });

        // Update the active page number
        const activePageElement = document.getElementById(`page${currentPage}`);
        if (activePageElement) {
            activePageElement.classList.add('active');
        } else {
            console.error(`Element with ID page${currentPage} not found.`);
        }

        // Update the previous and next page links
        const prevPageLink = document.getElementById('prevPage').querySelector('a');
        const nextPageLink = document.getElementById('nextPage').querySelector('a');

        prevPageLink.href = `shop${currentPage - 1}.html`;
        nextPageLink.href = `shop${currentPage + 1}.html`;

        console.log(`Previous Page Link: ${prevPageLink.href}`);
        console.log(`Next Page Link: ${nextPageLink.href}`);
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
        // Render all products in the specified container
        renderAllProducts('allProductsContainer');
        filterAndRenderProducts('allProductsContainer', '');
      });
    </script>

    

</html>